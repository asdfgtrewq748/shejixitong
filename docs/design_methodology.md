# 采矿系统设计理论与计算方法

## 目录
1. [概述](#概述)
2. [设计依据](#设计依据)
3. [核心计算方法](#核心计算方法)
4. [设计流程](#设计流程)
5. [参数说明](#参数说明)

---

## 概述

本采矿系统设计工具基于中国煤矿安全规程和开采设计规范，采用数学建模和智能算法，自动完成采区工作面布置、巷道规划和煤柱设计。系统综合考虑地质条件、安全要求和经济效益，生成符合规范的采矿设计方案。

---

## 设计依据

### 1. 主要规范标准

- **《煤矿安全规程》（2022版）**
  - 煤柱留设标准
  - 巷道断面要求
  - 通风系统设计

- **《煤矿开采设计规范》（GB 50215）**
  - 工作面尺寸确定
  - 采区巷道布置
  - 开采技术参数

- **《煤矿井巷工程设计规范》**
  - 巷道断面设计
  - 支护参数选择

### 2. 设计原则

1. **安全第一**：确保煤柱尺寸满足规程要求，防止顶板冒落
2. **经济合理**：最大化资源回收率，优化工作面布局
3. **技术可行**：考虑综采设备能力和施工条件
4. **仰斜开采**：从下倾侧开始布置，实现上山开采

---

## 核心计算方法

### 1. 煤柱宽度计算

#### 1.1 基本公式

根据《煤矿安全规程》，煤柱宽度计算公式：

```
B = H / K + 2 × S₀
```

**参数说明：**
- `B`：煤柱宽度（m）
- `H`：采深/埋深（m）
- `K`：矿压系数，取决于顶板岩性
  - 坚硬顶板：K = 6.0（岩石强度系数 > 1.2）
  - 中等顶板：K = 5.0（岩石强度系数 0.8 ~ 1.2）
  - 软弱顶板：K = 4.0（岩石强度系数 < 0.8）
- `S₀`：保护带宽度，一般取 4m

#### 1.2 修正系数

**煤层厚度修正：**
```javascript
if (厚度 > 5m) {
  煤柱宽度 *= 1.2  // 厚煤层采空区跨度大
} else if (厚度 > 3.5m) {
  煤柱宽度 *= 1.1
}
```

**倾角修正：**
```javascript
if (倾角 > 25°) {
  煤柱宽度 *= 1.2  // 急倾斜煤层稳定性差
} else if (倾角 > 15°) {
  煤柱宽度 *= 1.1
}
```

**最小值限制：**
- 一般情况：≥ 20m
- 深部开采（H > 800m）：≥ 30m
- 通常范围：20 ~ 35m

#### 1.3 计算示例

采深 H = 500m，煤层厚度 3m，倾角 10°，顶板中等强度（K=5.0）：

```
基础宽度 B = 500/5 + 2×4 = 100 + 8 = 108m

无需修正（厚度≤3.5m，倾角≤15°）

最终宽度 = max(20, 108) = 108m
```

---

### 2. 工作面宽度计算

#### 2.1 基础宽度

根据煤层厚度确定基础宽度：

| 煤层类型 | 厚度范围 | 基础宽度 | 理由 |
|---------|---------|---------|------|
| 薄煤层 | < 1.3m | 180m | 提高生产效率 |
| 中厚煤层 | 1.3 ~ 3.5m | 160m | 标准综采配置 |
| 厚煤层 | 3.5 ~ 6m | 150m | 单产大，可适当减小 |
| 特厚煤层 | > 6m | 140m | 保证安全，减小跨度 |

#### 2.2 埋深影响

```javascript
if (埋深 > 800m) {
  宽度 *= 0.85  // 深部顶板压力大，大幅减小
} else if (埋深 > 600m) {
  宽度 *= 0.90
} else if (埋深 > 400m) {
  宽度 *= 0.95
} else if (埋深 < 200m) {
  宽度 *= 1.10  // 浅部可适当增大
}
```

#### 2.3 倾角影响

```javascript
if (倾角 > 35°) {
  宽度 *= 0.80  // 急倾斜，设备工作困难
} else if (倾角 > 25°) {
  宽度 *= 0.85
} else if (倾角 > 15°) {
  宽度 *= 0.92
}
```

#### 2.4 范围限制

工作面宽度限制在 **100 ~ 300m**，最终结果取整到 10m。

#### 2.5 计算示例

煤层厚度 2.5m（中厚），埋深 450m，倾角 12°：

```
基础宽度 = 160m（中厚煤层）

埋深修正：450m ∈ (400, 600)
修正后宽度 = 160 × 0.95 = 152m

倾角修正：12° ≤ 15°，无需修正

最终宽度 = round(152/10) × 10 = 150m
```

---

### 3. 工作面推进长度计算

#### 3.1 基本公式

```
L = 采区长度 - 2 × 边界保护煤柱
```

- **采区长度**：采区在倾向方向的跨度
- **边界保护煤柱**：一般取 20 ~ 30m，默认 20m

#### 3.2 实际范围

- 一般范围：600 ~ 1500m
- 常用范围：800 ~ 1200m

---

### 4. 布局方向确定

#### 4.1 判断依据

根据煤层倾向判断工作面布局方向：

```javascript
function determineLayoutDirection(strikeDirection) {
  const angle = normalizeAngle(strikeDirection);

  if ((angle >= 315 && angle < 360) || (angle >= 0 && angle < 45)) {
    return 'horizontal';  // 倾向北/南 → 水平布局
  }
  if (angle >= 45 && angle < 135) {
    return 'horizontal';  // 倾向东北/东南 → 水平布局
  }
  if (angle >= 135 && angle < 225) {
    return 'vertical';    // 倾向东/西 → 垂直布局
  }
  if (angle >= 225 && angle < 315) {
    return 'vertical';    // 倾向西北/西南 → 垂直布局
  }
}
```

#### 4.2 布局示意

**水平布局（走向近东西）：**
```
    主运输大巷（北侧）
━━━━━━━━━━━━━━━━━━━━━━
║ 工作面1 ║ 煤柱 ║ 工作面2 ║
━━━━━━━━━━━━━━━━━━━━━━
    回风大巷（南侧）
```

**垂直布局（走向近南北）：**
```
  ┃            ┃
主 ┃ 工作面1    ┃ 回
运 ┃━━━━━━━━━━┃ 风
输 ┃ 煤柱      ┃ 大
大 ┃━━━━━━━━━━┃ 巷
巷 ┃ 工作面2    ┃
  ┃            ┃
```

---

### 5. 起始边界选择（仰斜开采）

#### 5.1 原则

从下倾侧开始布置工作面，实现上山开采，提高安全性和排水便利性。

#### 5.2 判断逻辑

```javascript
function selectStartBoundary(strikeDirection, bounds) {
  const angle = normalizeAngle(strikeDirection);

  // 倾向北（走向东西，倾向0°±45°）
  if ((angle >= 315 || angle < 45)) {
    return bounds.yMin;  // 从南侧开始
  }

  // 倾向南（走向东西，倾向180°±45°）
  if (angle >= 135 && angle < 225) {
    return bounds.yMax;  // 从北侧开始
  }

  // 倾向东（走向南北，倾向90°±45°）
  if (angle >= 45 && angle < 135) {
    return bounds.xMin;  // 从西侧开始
  }

  // 倾向西（走向南北，倾向270°±45°）
  if (angle >= 225 && angle < 315) {
    return bounds.xMax;  // 从东侧开始
  }
}
```

---

### 6. 巷道设计

#### 6.1 巷道类型与宽度

| 巷道类型 | 标准宽度 | 颜色标识 | 用途 |
|---------|---------|---------|------|
| 主运输大巷 | 5.0m | 青色 | 主要运输通道 |
| 回风大巷 | 4.5m | 橙色（虚线） | 主要回风通道 |
| 运输顺槽 | 4.0m | 明绿色（实线） | 工作面运输 |
| 回风顺槽 | 4.0m | 橙色（虚线） | 工作面回风 |
| 开切眼 | 6.0m | 蓝色 | 连接工作面与巷道 |
| 联络巷 | 3.5m | 灰色 | 辅助连接 |

#### 6.2 巷道布置

**主巷道：**
- 沿采区边界布置
- 水平布局：北侧运输，南侧回风
- 垂直布局：东/西侧运输，西/东侧回风

**顺槽：**
- 沿工作面两侧布置
- 运输顺槽：实线，明绿色
- 回风顺槽：虚线，橙色

---

## 设计流程

### 整体流程图

```
用户输入
   ↓
地质建模 → 煤层识别 → 评分计算
   ↓
参数计算
 ├─ 煤柱宽度
 ├─ 工作面宽度
 ├─ 推进长度
 └─ 布局方向
   ↓
工作面布置
 ├─ 确定起始边界（仰斜开采）
 ├─ 条带式布置
 └─ 考虑地质评分
   ↓
巷道规划
 ├─ 主巷道（边界）
 ├─ 运输顺槽
 ├─ 回风顺槽
 └─ 开切眼（可选）
   ↓
方案评分
 ↓
预览 / 导出DXF
```

### 详细步骤

#### 1. 地质数据输入
- 采区边界（多边形）
- 钻孔数据（位置、分层）
- 煤层参数（厚度、倾向、倾角）

#### 2. 地质建模
- 三角剖分插值
- 煤层追踪
- 地质条件评分

#### 3. 参数计算
```javascript
// 1. 计算煤柱宽度
const pillarResult = calculatePillarWidth(depth, thickness, dipAngle);

// 2. 计算工作面宽度
const widthResult = calculateWorkfaceWidth(thickness, depth, dipAngle);

// 3. 计算推进长度
const lengthResult = calculateWorkfaceLength(
  miningAreaLength,
  boundaryPillar
);

// 4. 确定布局方向
const direction = determineLayoutDirection(strikeDirection);
```

#### 4. 工作面布置
```javascript
const workfaces = layoutWorkfaces(
  grid,          // 地质评分网格
  bounds,        // 采区边界
  pillarWidth,   // 煤柱宽度
  workfaceWidth, // 工作面宽度
  direction,     // 布局方向
  strikeDirection // 倾向（用于仰斜开采）
);
```

#### 5. 巷道规划
- 主巷道沿边界布置
- 为每个工作面布置运输和回风顺槽
- 生成开切眼连接工作面与主巷道

#### 6. 方案评分
```javascript
score = 工作面平均评分 × 0.7 + min(100, 总开采面积/1000) × 0.3
```

---

## 参数说明

### 输入参数

| 参数 | 类型 | 单位 | 说明 | 典型值 |
|-----|------|------|------|-------|
| 采深 | number | m | 煤层埋深 | 200~1000 |
| 煤层厚度 | number | m | 煤层平均厚度 | 1.5~6.0 |
| 倾角 | number | ° | 煤层倾角 | 0~45 |
| 倾向 | number | ° | 煤层倾向方位角 | 0~360 |
| 岩石强度 | number | - | 顶板岩石强度系数 | 0.6~1.5 |
| 边界保护煤柱 | number | m | 采区边界留设煤柱 | 20~30 |

### 输出参数

| 参数 | 类型 | 单位 | 说明 |
|-----|------|------|------|
| 煤柱宽度 | number | m | 工作面间煤柱宽度 |
| 工作面宽度 | number | m | 工作面沿走向宽度 |
| 推进长度 | number | m | 工作面沿倾向推进长度 |
| 工作面数量 | number | - | 可布置的工作面数量 |
| 总开采面积 | number | m² | 所有工作面面积之和 |
| 回采率 | number | % | 采区资源回收率 |

### 评分标准

**地质条件评分（0~100）：**
- 90~100：优秀，煤层稳定，顶底板良好
- 70~89：良好，条件较好
- 50~69：一般，存在一定问题
- 30~49：较差，地质条件复杂
- 0~29：很差，不适宜开采

**综合评分：**
```
总分 = 工作面平均评分 × 70% + min(100, 开采面积/1000) × 30%
```

---

## 附录

### A. 代码文件位置

**核心算法：**
- `backend/utils/workfaceDesign.js` - 工作面设计和参数计算
- `backend/routes/design.js` - 设计方案生成接口

**前端显示：**
- `frontend/src/MiningDesignSystem.jsx` - 2D预览和交互
- `frontend/src/components/GeoModelPreview.jsx` - 3D地质模型

**导出功能：**
- `backend/utils/dxfExport.js` - DXF格式导出

### B. 关键函数

| 函数 | 文件 | 行号 | 功能 |
|-----|------|------|------|
| `calculatePillarWidth` | workfaceDesign.js | 93-144 | 煤柱宽度计算 |
| `calculateWorkfaceWidth` | workfaceDesign.js | 154-205 | 工作面宽度计算 |
| `calculateWorkfaceLength` | workfaceDesign.js | 214-225 | 推进长度计算 |
| `determineLayoutDirection` | workfaceDesign.js | 233-258 | 布局方向判断 |
| `selectStartBoundary` | workfaceDesign.js | 14-55 | 仰斜开采起始边界 |
| `layoutWorkfaces` | workfaceDesign.js | 368-446 | 工作面布置主函数 |
| `calculateDesignScore` | design.js | 243-266 | 方案评分 |

### C. 参考文献

1. 《煤矿安全规程》（2022版），国家矿山安全监察局
2. 《煤矿开采设计规范》GB 50215-2015
3. 《煤矿井巷工程设计规范》GB 50384-2016
4. 钱鸣高等，《矿山压力与岩层控制》，中国矿业大学出版社
5. 徐永圻等，《采矿学》，中国矿业大学出版社

---

**文档版本：** v1.0
**最后更新：** 2025-12-05
**作者：** 采矿系统设计工具开发团队
